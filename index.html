<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>æ¯”è¼ƒæ”¿åºœèˆ‡æ”¿æ²»ï½œç¬¬4é€± äº’å‹•å¼åŠ©æ•™èª²ç¶²é ï¼‰</title>
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .party-token { position: absolute; cursor: grab; user-select: none; touch-action: none; }
    .party-token:active { cursor: grabbing; }
    .token-dot { width: 14px; height: 14px; border-radius: 9999px; display: inline-block; }
    .focus-ring { outline: 2px solid transparent; outline-offset: 2px; }
    .focus-ring:focus { outline: 2px solid #6366f1; outline-offset: 2px; }
    .backdrop-blur { backdrop-filter: blur(6px); }
  </style>
</head>
<body class="bg-slate-50 text-slate-900">
  <!-- å°è¦½ï¼ˆåƒ…ä¿ç•™å…©å€ï¼‰ -->
  <header class="sticky top-0 z-50 bg-white/80 backdrop-blur border-b border-slate-200">
    <nav class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between" aria-label="ä¸»å°è¦½">
      <a href="#top" class="font-bold text-slate-800">ç¬¬5é€±ï½œç²¾ç°¡ç‰ˆ</a>
      <ul class="hidden md:flex items-center gap-5 text-sm">
        <li><a class="hover:text-indigo-600" href="#pre-class">èª²å‰æå•</a></li>
        <li><a class="hover:text-indigo-600" href="#spectrum">å…‰è­œéŠæˆ²</a></li>
      </ul>
    </nav>
  </header>

  <main id="top" class="max-w-6xl mx-auto px-4 py-8">
    <!-- Hero ç°¡è¿° -->
    <section class="mb-10">
      <h1 class="text-3xl md:text-4xl font-extrabold leading-tight">ç¬¬4é€±ï½œè‹±åœ‹å…©é»¨æ”¿æ²»</h1>
      <div class="mt-4 flex flex-wrap gap-3">
        <a href="#pre-class" class="px-4 py-2 rounded-xl bg-indigo-600 text-white focus-ring">å‰å¾€èª²å‰æå•</a>
        <a href="#spectrum" class="px-4 py-2 rounded-xl bg-blue-600 text-white focus-ring">å‰å¾€æ”¿é»¨å…‰è­œéŠæˆ²</a>
      </div>
    </section>

    <!-- èª²å‰æå•ï¼ˆä¿ç•™ï¼‰ -->
    <section id="pre-class" class="mb-12">
      <h2 class="text-2xl font-bold mb-3">èª²å‰æå•</h2>
      <p class="text-sm text-slate-600 mb-4">èªªæ˜ï¼šä¸‹åˆ—å…­é¡Œä¾›èª²å‰æ€è€ƒèˆ‡è¨è«–ã€‚æ¯é¡Œå‡å¯å¼µè²¼ä½ çš„çœ‹æ³•ï¼ˆæœ€å¤š300å­—ï¼‰ï¼Œè³‡æ–™åƒ…å„²å­˜åœ¨ä½ çš„ç€è¦½å™¨ï¼Œé‡æ–°æ•´ç†å¾Œä»ä¿ç•™ã€‚</p>
      <div id="preQ-container" class="grid grid-cols-1 gap-5"></div>
    </section>

    <!-- æ”¿é»¨å…‰è­œéŠæˆ²ï¼ˆä¿ç•™ï¼‰ -->
    <section id="spectrum" class="mb-12">
      <h2 class="text-2xl font-bold mb-2">äº’å‹•éŠæˆ²ï¼šè‹±åœ‹æ”¿é»¨æ„è­˜å½¢æ…‹å…‰è­œ</h2>
      <p class="text-sm text-slate-600 mb-4">èªªæ˜ï¼šå°‡æ”¿é»¨æ‹–æ‹½åˆ°ä½ èªç‚ºåˆé©çš„ä½ç½®ã€‚å¯åˆ‡æ›è»¸ç·šã€‚å¯åŒ¯å‡º JSON èˆ‡åœ¨æœ¬æ©Ÿä¿å­˜å®šä½èˆ‡60å­—ç†ç”±ã€‚</p>

      <div id="spectrum-section" class="section">
        <div class="text-center mb-6">
          <h3 class="text-xl font-bold text-gray-900 mb-1">ğŸ¯ è‹±åœ‹æ”¿é»¨æ„è­˜å½¢æ…‹å…‰è­œ</h3>
          <p class="text-gray-600 text-sm">æ‹–æ‹½æ”¿é»¨åˆ°ä½ èªç‚ºåˆé©çš„ä½ç½®ï¼Œæ¢ç´¢ä¸åŒçš„æ”¿æ²»å…‰è­œç¶­åº¦</p>
        </div>
        <div class="bg-white rounded-xl p-6 shadow border">
          <div class="mb-4 flex flex-col sm:flex-row gap-3 sm:items-center sm:justify-between">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">é¸æ“‡å…‰è­œé¡å‹ï¼š</label>
              <select id="spectrum-type" class="border border-gray-300 rounded-lg px-3 py-2">
                <option value="economic-social">ç¶“æ¿Ÿæ”¿ç­– vs ç¤¾æœƒæ”¿ç­–</option>
                <option value="left-right">å·¦æ´¾ vs å³æ´¾</option>
                <option value="authoritarian-libertarian">å¨æ¬Š vs è‡ªç”±ä¸»ç¾©</option>
              </select>
            </div>
            <div class="flex gap-2">
              <button id="exportJSON" class="px-3 py-2 text-sm rounded-lg bg-slate-800 text-white">åŒ¯å‡ºåº§æ¨™ JSON</button>
              <button id="resetBtn" class="px-3 py-2 text-sm rounded-lg bg-blue-600 text-white">é‡ç½®æ‰€æœ‰æ”¿é»¨</button>
            </div>
          </div>

          <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
            <!-- å¾…æ”¾å€ -->
            <div class="lg:col-span-1">
              <h4 class="text-sm font-semibold text-gray-900 mb-2">ğŸ¯ æ”¿é»¨å¾…æ”¾å€</h4>
              <div id="party-pool" class="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg p-4 min-h-64 border-2 border-dashed border-blue-300">
                <p class="text-xs text-gray-600 mb-3 text-center">æ‹–æ‹½æ”¿é»¨åˆ°å³å´å…‰è­œåœ–ä¸­</p>
                <div id="available-parties" class="space-y-2"></div>
              </div>
              <p class="text-xs text-slate-500 mt-2">éµç›¤å¯ç”¨ Tab èšç„¦æ”¿é»¨ï¼Œæ–¹å‘éµç§»å‹•ã€‚</p>
            </div>

            <!-- å…‰è­œåœ– -->
            <div class="lg:col-span-3">
              <h4 class="text-sm font-semibold text-gray-900 mb-2">ğŸ“Š æ”¿æ²»å…‰è­œåœ–</h4>
              <div id="spectrum-grid" class="relative bg-gray-50 rounded-lg border-2 border-gray-200" style="height: 500px;" tabindex="0" aria-label="å…‰è­œæŠ•æ”¾å€">
                <div id="axis-labels" class="absolute inset-0 pointer-events-none select-none">
                  <div id="axis-top" class="absolute top-2 left-1/2 -translate-x-1/2 text-xs font-medium text-gray-600">ç¤¾æœƒè‡ªç”±ä¸»ç¾©</div>
                  <div id="axis-bottom" class="absolute bottom-2 left-1/2 -translate-x-1/2 text-xs font-medium text-gray-600">ç¤¾æœƒä¿å®ˆä¸»ç¾©</div>
                  <div id="axis-left" class="absolute left-2 top-1/2 -translate-y-1/2 -rotate-90 text-xs font-medium text-gray-600">ç¶“æ¿Ÿå·¦æ´¾</div>
                  <div id="axis-right" class="absolute right-2 top-1/2 -translate-y-1/2 rotate-90 text-xs font-medium text-gray-600">ç¶“æ¿Ÿå³æ´¾</div>
                </div>
                <div class="absolute top-1/2 left-0 right-0 h-px bg-gray-300"></div>
                <div class="absolute left-1/2 top-0 bottom-0 w-px bg-gray-300"></div>
                <div id="parties-container" class="absolute inset-0"></div>
              </div>

              <!-- åœ–ä¾‹ -->
              <div class="mt-4 grid grid-cols-2 md:grid-cols-4 lg:grid-cols-4 gap-2 text-xs">
                <div class="flex items-center gap-2"><span class="token-dot bg-red-500"></span><span>Labour</span></div>
                <div class="flex items-center gap-2"><span class="token-dot bg-blue-500"></span><span>Conservative</span></div>
                <div class="flex items-center gap-2"><span class="token-dot bg-yellow-500"></span><span>Liberal Democrats</span></div>
                <div class="flex items-center gap-2"><span class="token-dot bg-green-500"></span><span>Green Party</span></div>
                <div class="flex items-center gap-2"><span class="token-dot bg-purple-500"></span><span>SNP</span></div>
                <div class="flex items-center gap-2"><span class="token-dot bg-orange-500"></span><span>Plaid Cymru</span></div>
                <div class="flex items-center gap-2"><span class="token-dot bg-gray-600"></span><span>Reform UK</span></div>
                <div class="flex items-center gap-2"><span class="token-dot bg-emerald-600"></span><span>Sinn FÃ©in</span></div>
              </div>

              <div class="mt-4">
                <label class="text-sm font-medium">60å­—ç†ç”±ï¼š</label>
                <textarea id="spectrum-just" class="mt-1 w-full border rounded-lg p-2 text-sm" rows="3" placeholder="è«‹ä»¥æŒ‡å®šé–±è®€çš„è­‰æ“šï¼Œç°¡è¿°ä½ çš„å®šä½ç†ç”±ï¼ˆç´„60å­—ï¼‰"></textarea>
                <div class="mt-2 flex gap-2">
                  <button id="saveSpectrum" class="px-3 py-2 text-sm rounded-lg bg-indigo-600 text-white">ä¿å­˜åˆ°æœ¬æ©Ÿ</button>
                  <button id="clearSpectrum" class="px-3 py-2 text-sm rounded-lg bg-slate-200">æ¸…é™¤ä¿å­˜</button>
                </div>
                <p class="text-xs text-slate-500 mt-2">è³‡æ–™å„²å­˜åœ¨ç€è¦½å™¨ localStorageï¼›æ›´æ›è£ç½®ä¸æœƒåŒæ­¥ã€‚</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer class="py-8 text-center text-xs text-slate-500">æœ¬é é¢ç‚ºæ•™å­¸ç”¨é€”ï¼ˆç²¾ç°¡ç‰ˆï¼‰ã€‚</footer>
  </main>

  <!-- JSï¼šåƒ…ä¿ç•™èª²å‰æå•èˆ‡å…‰è­œéŠæˆ²åŠŸèƒ½ -->
  <script>
    // ====== localStorage åŒ…è£ ======
    const store = {
      get(key, def) { try { return JSON.parse(localStorage.getItem(key)) ?? def; } catch { return def; } },
      set(key, val) { localStorage.setItem(key, JSON.stringify(val)); }
    };

    // ====== èª²å‰æå•ï¼ˆ6é¡Œï¼‰ ======
    const preQ = [
      "æ–‡ç« é‡é»å¥½åƒä¸»è¦æ˜¯è‘—é‡åœ¨é¸èˆ‰çµæœçš„åˆ†æï¼Œä¸¦ä¸”åŒæ™‚è¨è«–äº†è„«æ­ï¼é¸å€æ”¯æŒåº¦çš„è®ŠåŒ–ï¼Œå’Œç›¸å°å¤šæ•¸æ±ºä¸å†ä¿è­‰å…©é»¨æ”¿æ²»çš„å„ªå‹¢ã€‚ä½†å°æ–¼æ”¹é©é»¨å´›èµ·çš„ä¸€å¤§æˆå› ï¼Œå³è‹±åœ‹é¢å°çš„å¤§é‡ç§»æ°‘å•é¡Œï¼Œå¥½åƒè¼ƒå°‘æœ‰æ·±å…¥åˆ†æï¼Œæ­¤ä¸€å•é¡Œæ˜¯å¦æ‰æ˜¯é€ æˆæ”¹é©é»¨æ­¤æ¬¡å¦‚æ­¤æˆåŠŸçš„æ ¹æœ¬åŸå› ï¼Ÿ",
      "åœ¨ä¸èª¿æ•´é¸åˆ¶çš„æƒ…æ³ä¸‹ï¼Œæ”¹é©é»¨ã€ç¶ é»¨èˆ‡è‡ªæ°‘é»¨ç©¶ç«Ÿèƒ½å¦åœ¨å…¨åœ‹å±¤ç´šè®Šæˆå¯¦è³ªå¸­æ¬¡èˆ‡åŸ·æ”¿å½±éŸ¿åŠ›ï¼Œé‚„æ˜¯å¤šé»¨åŒ–åªåœç•™åœ¨åœ°æ–¹æ”¿æ²»èˆ‡å¾—ç¥¨ç‡æ•¸å­—ä¸Šï¼Ÿ",
      "æ”¹é©é»¨ä»¥åŠè‡ªç”±æ°‘ä¸»é»¨å·²ç¶“åœ¨åœ°æ–¹é¸èˆ‰ä¸Šå–å¾—å‹åˆ©ï¼Œé‚£éº¼åœ¨æœªä¾†çš„é¸èˆ‰ä¹‹ä¸­ï¼Œå°é»¨æ˜¯å¦æœƒå¸æ”¶ä»–å€‘å¾—ä¾†ä¸æ˜“çš„æ”¿æ²»æœå¯¦ï¼Œè½‰è®Šæˆç‚ºä¸€è‚¡ä¸å¯å¿½è¦–çš„å‹¢åŠ›ï¼Œåœ¨æœªä¾†çš„å¤§é¸ä¸­é€†é¢¨ç¿»ç›¤å‘¢ï¼Ÿå‡ä»¥æ™‚æ—¥ï¼Œæ˜¯å¦èƒ½ä¸æ˜¯ä»¥è¯åˆåŸ·æ”¿çš„èº«åˆ†ï¼Œåä¸Šé¦–ç›¸å¯¶åº§å‘¢ï¼Ÿ",
      "æˆ‘åœ‹çš„å°ç£æ°‘çœ¾é»¨è¿‘å¹´ä¾†äº¦æœ‰åˆ†åŒ–ä¸­åœ‹åœ‹æ°‘é»¨çš„ç¥¨æºçš„ç¾è±¡ï¼Œé‚£éº¼åƒç…§è‹±åœ‹ç¶“é©—ï¼Œæ˜¯å¦åœ¨æˆ‘åœ‹ä¹Ÿæœƒå½¢æˆæ”¿é»¨é‡çµ„çš„ç¾è±¡å‘¢?",
      "æ—¢ç„¶å–®ä¸€é¸å€å¤šæ•¸åˆ¶åŸå…ˆæ˜¯è‹±åœ‹é•·æœŸç¶­æŒå…©é»¨åˆ¶çš„åŸå› ä¹‹ä¸€ï¼Œç„¶è€Œç¾åœ¨å·¥é»¨å’Œä¿å®ˆé»¨å„ªå‹¢ä¸å†ï¼Œé‚£éº¼è‹±åœ‹æ˜¯å¦æœƒæ”¹è®Šé¸èˆ‰åˆ¶åº¦ï¼Ÿé‚„æ˜¯æœƒç¶­æŒç¾ç‹€ï¼Œé¿å…æ”¿æ²»è®Šå¾—æ›´è¤‡é›œï¼Ÿ",
      "å–®ä¸€é¸å€ç›¸å°å¤šæ•¸æ±ºéå»å°æ–¼å°é»¨ä¸åˆ©ï¼ŒReformèˆ‡è‡ªç”±æ°‘ä¸»é»¨åœ¨åœ°æ–¹é¸èˆ‰çš„å‹åˆ©æ˜¯å¦èƒ½è¤‡è£½åˆ°åœ‹æœƒé¸èˆ‰ï¼Ÿé‚„æ˜¯åªèƒ½æ­¢æ­¥æ–¼åœ°æ–¹é¸èˆ‰ï¼Ÿ",
    ];

    function renderNote(note){
      const div = document.createElement('div');
      const d = new Date(note.ts);
      div.className = 'border rounded-lg p-2';
      div.innerHTML = `<div class="text-xs text-slate-500">${d.toLocaleString()}</div><div>${note.text}</div>`;
      return div;
    }

    function renderPreClass() {
      const wrap = document.getElementById('preQ-container');
      wrap.innerHTML = '';
      preQ.forEach((q, idx) => {
        const key = `preQ_${idx}`;
        const saved = store.get(key, []);
        const card = document.createElement('div');
        card.className = 'bg-white rounded-2xl border p-5';
        card.innerHTML = `
          <h3 class=\"font-semibold text-slate-900\">èª²å‰æå• ${idx+1}</h3>
          <p class=\"text-sm text-slate-700 mt-1\">${q}</p>
          <textarea class=\"mt-3 w-full border rounded-lg p-2 text-sm\" rows=\"3\" placeholder=\"æœ€å¤š300å­—...\" id=\"preIn_${idx}\"></textarea>
          <div class=\"mt-2 flex gap-2\">\n            <button data-idx=\"${idx}\" class=\"prePost px-3 py-2 text-sm rounded-lg bg-slate-900 text-white\">ç™¼å¸ƒ</button>
            <button data-idx=\"${idx}\" class=\"preClear px-3 py-2 text-sm rounded-lg bg-slate-200\">æ¸…ç©º</button>
          </div>
          <div id=\"preList_${idx}\" class=\"mt-3 space-y-2 text-sm\"></div>
        `;
        wrap.appendChild(card);
        const list = card.querySelector(`#preList_${idx}`);
        saved.forEach(t => list.appendChild(renderNote(t)));
      });

      wrap.querySelectorAll('.prePost').forEach(btn => btn.addEventListener('click', e => {
        const idx = e.currentTarget.getAttribute('data-idx');
        const key = `preQ_${idx}`;
        const ta = document.getElementById(`preIn_${idx}`);
        const val = (ta.value || '').trim();
        if (!val) return;
        const cur = store.get(key, []);
        const note = { text: val, ts: Date.now() };
        cur.push(note); store.set(key, cur);
        const list = document.getElementById(`preList_${idx}`);
        list.appendChild(renderNote(note));
        ta.value = '';
      }));
      wrap.querySelectorAll('.preClear').forEach(btn => btn.addEventListener('click', e => {
        const idx = e.currentTarget.getAttribute('data-idx');
        store.set(`preQ_${idx}`, []);
        document.getElementById(`preList_${idx}`).innerHTML='';
      }));
    }

    // ====== å…‰è­œéŠæˆ² ======
    const parties = [
      { id:'lab', name:'Labour', color:'#ef4444' },
      { id:'con', name:'Conservative', color:'#3b82f6' },
      { id:'ld',  name:'Liberal Democrats', color:'#f59e0b' },
      { id:'grn', name:'Green Party', color:'#22c55e' },
      { id:'snp', name:'SNP', color:'#a855f7' },
      { id:'pc',  name:'Plaid Cymru', color:'#f97316' },
      { id:'ref', name:'Reform UK', color:'#4b5563' },
      { id:'sf',  name:'Sinn FÃ©in', color:'#059669' },
    ];

    const spectrumGrid = () => document.getElementById('spectrum-grid');
    const partiesContainer = () => document.getElementById('parties-container');

    function initPool(){
      const pool = document.getElementById('available-parties');
      pool.innerHTML = '';
      parties.forEach(p => {
        const btn = document.createElement('button');
        btn.className = 'w-full flex items-center gap-2 border rounded-lg p-2 bg-white focus-ring';
        btn.setAttribute('data-id', p.id);
        btn.innerHTML = `<span class=\"token-dot\" style=\"background:${p.color}\"></span><span class=\"text-sm\">${p.name}</span>`;
        btn.addEventListener('click', () => createOrFocusToken(p.id));
        pool.appendChild(btn);
      });
    }

    function createOrFocusToken(id){
      let el = document.getElementById(`token-${id}`);
      if (!el) {
        el = document.createElement('div');
        el.id = `token-${id}`;
        el.className = 'party-token px-2 py-1 rounded-lg border bg-white shadow text-xs';
        const p = parties.find(x => x.id===id);
        el.innerHTML = `<span class=\"token-dot\" style=\"background:${p.color}\"></span> <span>${p.name}</span>`;
        el.style.left = '48%';
        el.style.top = '48%';
        el.setAttribute('tabindex','0');
        el.setAttribute('role','button');
        el.setAttribute('aria-label', `${p.name} æ‹–æ‹½ token`);
        partiesContainer().appendChild(el);
        makeDraggable(el);
      }
      el.focus();
    }

    function makeDraggable(el){
      let dragging = false, startX=0, startY=0, startLeft=0, startTop=0;
      const grid = spectrumGrid();
      function onPointerDown(e){
        dragging = true;
        el.setPointerCapture(e.pointerId);
        startX = e.clientX; startY = e.clientY;
        const rect = el.getBoundingClientRect();
        startLeft = rect.left; startTop = rect.top;
        e.preventDefault();
      }
      function onPointerMove(e){
        if(!dragging) return;
        const dx = e.clientX - startX; const dy = e.clientY - startY;
        const gridRect = grid.getBoundingClientRect();
        let newLeft = startLeft + dx - gridRect.left;
        let newTop  = startTop + dy - gridRect.top;
        newLeft = Math.max(0, Math.min(newLeft, gridRect.width - el.offsetWidth));
        newTop  = Math.max(0, Math.min(newTop, gridRect.height - el.offsetHeight));
        el.style.left = (newLeft / gridRect.width * 100) + '%';
        el.style.top  = (newTop  / gridRect.height* 100) + '%';
      }
      function onPointerUp(e){ dragging = false; }
      el.addEventListener('pointerdown', onPointerDown);
      el.addEventListener('pointermove', onPointerMove);
      el.addEventListener('pointerup', onPointerUp);

      el.addEventListener('keydown', (e) => {
        const step = (e.shiftKey? 3 : 1);
        const curLeft = parseFloat(el.style.left || '50%');
        const curTop = parseFloat(el.style.top || '50%');
        if(['ArrowUp','ArrowDown','ArrowLeft','ArrowRight'].includes(e.key)) e.preventDefault();
        if(e.key==='ArrowUp') el.style.top = Math.max(0, curTop - step) + '%';
        if(e.key==='ArrowDown') el.style.top = Math.min(100, curTop + step) + '%';
        if(e.key==='ArrowLeft') el.style.left = Math.max(0, curLeft - step) + '%';
        if(e.key==='ArrowRight') el.style.left = Math.min(100, curLeft + step) + '%';
      });
    }

    function resetTokens(){ partiesContainer().innerHTML = ''; }

    function exportPositions(){
      const data = parties.map(p => {
        const el = document.getElementById(`token-${p.id}`);
        if(!el) return { id:p.id, name:p.name, placed:false };
        return { id:p.id, name:p.name, placed:true, left: el.style.left, top: el.style.top };
      });
      const text = JSON.stringify(data, null, 2);
      navigator.clipboard.writeText(text).then(()=>{ alert('å·²è¤‡è£½ JSON åˆ°å‰ªè²¼ç°¿'); });
    }

    function saveSpectrum(){
      const data = parties.map(p => {
        const el = document.getElementById(`token-${p.id}`);
        return { id:p.id, left: el? el.style.left : null, top: el? el.style.top : null };
      });
      store.set('spectrum_positions', data);
      store.set('spectrum_just', document.getElementById('spectrum-just').value || '');
      alert('å·²ä¿å­˜åˆ°æœ¬æ©Ÿ');
    }
    function loadSpectrum(){
      const saved = store.get('spectrum_positions', null);
      const just = store.get('spectrum_just', '');
      if(saved){
        resetTokens();
        saved.forEach(it => {
          if(it.left!=null && it.top!=null){
            createOrFocusToken(it.id);
            const el = document.getElementById(`token-${it.id}`);
            if(el){ el.style.left = it.left; el.style.top = it.top; }
          }
        });
      }
      document.getElementById('spectrum-just').value = just;
    }

    function changeSpectrumLabels(mode){
      const top = document.getElementById('axis-top');
      const bottom = document.getElementById('axis-bottom');
      const left = document.getElementById('axis-left');
      const right = document.getElementById('axis-right');
      if(mode==='economic-social'){
        top.textContent = 'ç¤¾æœƒè‡ªç”±ä¸»ç¾©'; bottom.textContent='ç¤¾æœƒä¿å®ˆä¸»ç¾©';
        left.textContent= 'ç¶“æ¿Ÿå·¦æ´¾'; right.textContent = 'ç¶“æ¿Ÿå³æ´¾';
      } else if(mode==='left-right'){
        top.textContent = 'è‡ªç”±ä¸»ç¾©'; bottom.textContent='ä¿å®ˆä¸»ç¾©';
        left.textContent= 'å·¦æ´¾'; right.textContent = 'å³æ´¾';
      } else {
        top.textContent = 'è‡ªç”±ä¸»ç¾©'; bottom.textContent='å¨æ¬Šä¸»ç¾©';
        left.textContent= 'ç¶“æ¿Ÿå·¦æ´¾'; right.textContent = 'ç¶“æ¿Ÿå³æ´¾';
      }
    }

    // ç¶å®šèˆ‡å•Ÿå‹•
    document.getElementById('spectrum-type').addEventListener('change', (e)=>{ changeSpectrumLabels(e.target.value); });
    document.getElementById('exportJSON').addEventListener('click', exportPositions);
    document.getElementById('resetBtn').addEventListener('click', ()=>{ resetTokens(); });
    document.getElementById('saveSpectrum').addEventListener('click', saveSpectrum);
    document.getElementById('clearSpectrum').addEventListener('click', ()=>{ store.set('spectrum_positions', null); store.set('spectrum_just',''); alert('å·²æ¸…é™¤ä¿å­˜'); });

    // å•Ÿå‹•
    renderPreClass();
    initPool();
    changeSpectrumLabels(document.getElementById('spectrum-type').value);
    loadSpectrum();
  </script>
</body>
</html>
